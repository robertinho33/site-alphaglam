<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XCadastro e Agendamento Ladies</title>
    <link rel="stylesheet" href="css/ladies/style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="menu">
            <button>☰ Menu</button>
            <ul>
                <li><a href="index.html">Voltar</a></li>
            </ul>
        </div>
    </header>

    <!-- Produtos -->
    <section id="produtos">
        <div class="image-grid">
            <img src="https://images.yampi.io/unsafe/fit-in/275x275/filters:background_color(white):upscale()/https://images.yampi.me/assets/stores/grupo-ecobelle/uploads/images/mascara-liquida-liquid-mask-ecobelle-200-ml-66fd5cae45ed1-large.png" alt="Imagem 1" data-name="Máscara Líquida" data-price="50">
            <img src="https://images.yampi.io/unsafe/fit-in/275x275/filters:background_color(white):upscale()/https://images.yampi.me/assets/stores/grupo-ecobelle/uploads/images/finalizador-termico-coco-camomila-by-vitoria-lima-200-ml-667c4d7031e63-large.png" alt="Imagem 2" data-name="Finalizador Térmico" data-price="40">
            <!-- Adicione mais imagens conforme necessário -->
        </div>
    </section>

    <!-- Carrinho -->
    <section id="carrinho">
        <div class="cart">
            <h2>Meu Carrinho</h2>
            <ul id="cart-items"></ul>
            <div class="total" id="total-price">Total: R$ 0,00</div>

            <div id="form-carrinho" style="display: none;">
                <h2>Informe seus dados</h2>
                <form action="https://getform.io/f/endpoint-carrinho" method="POST">
                    <label for="nome-carrinho">Nome</label>
                    <input type="text" id="nome-carrinho" name="nome" required>
                    
                    <label for="telefone-carrinho">Telefone</label>
                    <input type="text" id="telefone-carrinho" name="telefone" required>
                    
                    <div class="buttons">
                        <button id="checkout-btn">Finalizar Compra</button>
                        <button type="button" class="btn btn-primary" name="não-tenho-cadastro">Não tenho cadastro</button>
                    </div>
                </form>
            </div>
        </div>
        <button id="already-registered">Já tenho cadastro</button>
    </section>

    <!-- Cadastro -->
    <section id="cadastro">
        <div id="form-cadastro" style="display: none;">
            <h1>Cadastro Ladies</h1>
            <form action="https://getform.io/f/ayvvqnnb" method="POST">
                <label for="nome">Nome</label>
                <input type="text" id="nome" name="nome" required>
                
                <label for="telefone">Telefone</label>
                <input type="text" id="telefone" name="telefone" required>
                
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
                
                <button type="submit">Cadastrar</button>
            </form>
        </div>
    </section>

    <!-- Agendamento -->
    <section id="agendamento">
        <h1>Agendamento</h1>
        <form action="https://getform.io/f/ayvvqnnb" method="POST">
            <label for="data">Data de Agendamento</label>
            <input type="date" id="data" name="data" required>
            
            <label for="horario">Horário de Agendamento</label>
            <select id="horario" name="horario" required>
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <!-- Adicione mais horários conforme necessário -->
            </select>
            
            <label for="servicos">Serviços</label>
            <input type="text" id="servicos" name="servicos" required>
            
            <button type="submit">Agendar</button>
        </form>
    </section>

    <!-- Scripts -->
    <script>
        // Script JavaScript para gerenciar carrinho e interação
        let cart = [];
        const images = document.querySelectorAll('.image-grid img');
        const cartItems = document.getElementById('cart-items');
        const totalPrice = document.getElementById('total-price');
        const checkoutBtn = document.getElementById('checkout-btn');
        const formCadastro = document.getElementById('form-cadastro');
        const formCarrinho = document.getElementById('form-carrinho');
        const btnJaTenhoCadastro = document.getElementById('already-registered');
        const btnNaoTenhoCadastro = document.querySelector('button[name="não-tenho-cadastro"]');

        // Funções para manipular o carrinho
        function updateCart() {
            cartItems.innerHTML = '';
            let total = 0;
            cart.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <img src="${item.src}" alt="${item.name}" style="width: 50px; height: auto; margin-right: 10px; border-radius: 5px;">
                    ${item.name} - R$ ${item.price.toFixed(2)}
                    <button class="remove-item" data-index="${index}">Excluir</button>
                `;
                cartItems.appendChild(li);
                total += item.price;
            });
            totalPrice.textContent = `Total: R$ ${total.toFixed(2)}`;
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', event => {
                    const index = event.target.getAttribute('data-index');
                    cart.splice(index, 1);
                    updateCart();
                });
            });
        }

        // Eventos principais
        images.forEach(image => {
            image.addEventListener('click', () => {
                const name = image.getAttribute('data-name');
                const price = parseFloat(image.getAttribute('data-price'));
                const src = image.getAttribute('src');
                cart.push({ name, price, src });
                updateCart();
            });
        });

        btnJaTenhoCadastro.addEventListener('click', () => {
            formCadastro.style.display = 'none';
            formCarrinho.style.display = 'block';
        });

        btnNaoTenhoCadastro.addEventListener('click', () => {
            formCadastro.style.display = 'block';
            formCarrinho.style.display = 'none';
        });

        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                alert('Adicione ao menos um item ao carrinho antes de finalizar a compra.');
                return;
            }
            const items = cart.map(item => `${item.name} - R$ ${item.price.toFixed(2)}`).join('%0A');
            const total = cart.reduce((sum, item) => sum + item.price, 0).toFixed(2);
            const message = `Olá! Gostaria de finalizar o seguinte pedido:%0A%0A${items}%0A%0ATotal: R$ ${total}`;
            window.open(`https://wa.me/5511986215473?text=${message}`, '_blank');
        });

        document.addEventListener('DOMContentLoaded', () => {
            formCadastro.style.display = 'none';
            formCarrinho.style.display = 'none';
        });
    </script>
</body>
</html>
